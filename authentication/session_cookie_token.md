## Cookie

- Key-Value 형식의 문자열 덩어리
- 웹 사이트 방문 시 해당 웹사이트 서버에서 클라이언트 브라우저에 설치하는 작은 기록 정보 파일
- 고유 정보 식별 가능

### 쿠키를 활용한 인증 방식

1. 클라이언트가 서버에 요청 보냄
2. 서버가 요청에 대한 응답을 작성할 때, 클라이언트에 저장하고 싶은 정보를 응답 헤더의 Set-Cookie에 담음
3. 이후 해당 클라이언트는 요청을 보낼 때마다 매번 저장된 쿠키의 요청 헤더의 Cookie에 담아 전송
서버는 쿠키에 담긴 정보를 바탕으로 해당 요청의 클라이언트가 누구인지 식별

### 쿠키 방식의 단점

- 보안에 취약
    - 요청 시 쿠키의 값을 그대로 보내기 때문에 유출 및 조작 당할 수 있는 위험 존재
- 용량 제한이 있어 많은 정보를 담을 수 없음
- 브라우저마다 쿠키에 대한 지원 형태가 다르기 때문에 브라우저간 공유 불가능
- 쿠키의 크기가 커지면 네트워크에 부하가 심해짐

## Session

- 세션 객체는 Key-Value 형식으로, SESSION ID가 key에 해당되고 이에 대응되는 Value로 구성되어 있다.
- 세션은 비밀번호 등 클라이언트의 민감한 인증 정보를 브라우저가 아닌 서버 측에 저장하고 관리

### Session 인증 방식

1. 유저가 웹사이트에서 로그인하면 세션이 서버 메모리(혹은 DB) 상에 저장됨
세션 식별을 위한 Session id 기준 정보 저장
2. 서버에서 브라우저의 쿠키에 Session id 저장
3. 브라우저는 해당 사이트에 대한 모든 요청에 Session id를 쿠키에 담아 전송
4. 서버는 클라이언트가 보낸 Session id와 서버 메모리로 관리하고 있는 Session id를 비교하여 인증 수행

### Session 방식의 단점

- Session ID 자체를 탈취하여 클라이언트인 척 위장할 수 있다는 한계 존재
- 서버에서 세션 저장소를 사용하기 때문에 요청이 많아지면 서버에 부하가 심해짐

## Token

- 클라리언트가 서버에 접속하면 서버에서 해당 클라이언트에게 인증되었다는 의미로 토큰을 부여
- 토큰은 유일하고, 토큰을 발급받은 클라이언트는 다시 서버에 요청을 보낼 때 요청 헤더에 토큰을 심어 전송
- 서버는 클라이언트로부터 받은 토큰을 서버에서 제공한 토큰과의 일치 여부를 체크 후 인증 과정을 처리

### Token 인증 방식

1. 사용자가 로그인 함
2. 서버 측에서 사용자에게 유일한 토큰 발급
3. 클라이언트는 서버 측에서 전달받은 토큰을 쿠키 혹은 스토리지에 저장해 두고, 서버에 요청을 할 때마다 해당 토큰을 요청 헤더에 포함시켜 전송
4. 서버는 전달받은 토큰을 검증하고 요청에 응답
5. 토큰에는 요청한 사람의 정보가 담겨있어 DB를 조회하지 않고 누가 요청하는 지 알 수 있음

### Token 방식의 장점

- 세션과 달리 서버가 아닌 클라이언트에 저장되기 때문에 메모리나 스토리지 등을 통해 세션을 관리했던 서버의 부담을 덜 수 있음
- 웹에는 쿠키와 세션이 있지만 앱에서는 없기 때문에 앱과 서버가 통신하는 데 사용될 수 있음

### Token 단점

- 쿠키, 세션 방식과 다르게 토큰 자체의 데이터 길이가 길어 인증 요청이 많아질수록 네트워크 부하가 심해질 수 있음
- Payload 자체는 암호화되지 않기 때문에 유저의 중요한 정보는 담을 수 없음
- 토큰을 탈취당하면 대처하기 어려움(사용 기간을 제한하여 보완 가능)